{
  "$schema": "https://schema.railpack.com",
  "provider": "php",
  "packages": {
    "php": "8.3"
  },
  "buildAptPackages": [
    "bison",
    "re2c",
    "libpq-dev",
    "libpng-dev",
    "libjpeg-dev",
    "libfreetype6-dev",
    "libgd-dev",
    "libicu-dev",
    "libonig-dev",
    "libxml2-dev",
    "libsqlite3-dev",
    "libreadline-dev",
    "libzip-dev",
    "libcurl4-openssl-dev",
    "libssl-dev"
  ],
  "phpExtensions": [
    "pdo_pgsql",
    "pgsql",
    "intl",
    "gd",
    "exif",
    "redis",
    "pcntl"
  ],
  "phpExtensionConfig": {
    "gd": "--with-freetype --with-jpeg"
  },
  "steps": {
    "install": {
      "commands": [
        "mkdir -p storage/framework/cache storage/framework/sessions storage/framework/views storage/logs storage/app/public bootstrap/cache resources/views",
        "chmod -R 775 storage bootstrap/cache",
        "composer install --no-dev --optimize-autoloader --no-interaction --prefer-dist",
        "php artisan octane:install --server=frankenphp --no-interaction"
      ]
    }
  },
  "deploy": {
    "startCommand": "bash deploy-entrypoint.sh"
  }
}
