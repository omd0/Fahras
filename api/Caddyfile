{
	admin off
	persist_config off
	auto_https off

	{$CADDY_GLOBAL_OPTIONS}

	log {
		format json
		output stderr
		level INFO
	}

	frankenphp {
		{$FRANKENPHP_CONFIG}
	}
}

{$CADDY_EXTRA_CONFIG}

:{$PORT:80} {
	root * /app/public

	encode zstd br gzip

	file_server {
		hide .git
		hide .env*
	}

	header {
		X-Frame-Options "SAMEORIGIN"
		X-Content-Type-Options "nosniff"
		X-XSS-Protection "1; mode=block"
		Referrer-Policy "no-referrer-when-downgrade"
	}

	{$CADDY_SERVER_EXTRA_DIRECTIVES}

	php_server
}
